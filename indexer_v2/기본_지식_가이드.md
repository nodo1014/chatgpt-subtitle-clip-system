# 📚 Theme Search - 기본 지식 및 용어 사전

> **🎓 신입자 및 비개발자를 위한 필수 지식 가이드**

## 📋 목차
1. [웹 개발 기본 지식](#웹-개발-기본-지식)
2. [데이터베이스 기초](#데이터베이스-기초)
3. [영상 처리 기본](#영상-처리-기본)
4. [네트워크 및 API](#네트워크-및-api)
5. [파일 시스템](#파일-시스템)
6. [용어 사전](#용어-사전)
7. [자주 묻는 질문](#자주-묻는-질문)

---

## 🌐 웹 개발 기본 지식

### 웹 애플리케이션이란?
웹 애플리케이션은 **웹 브라우저에서 실행되는 프로그램**입니다.

```
사용자 (브라우저) ↔ 웹 서버 ↔ 데이터베이스
```

#### 프론트엔드 vs 백엔드
- **프론트엔드**: 사용자가 보는 화면 (HTML, CSS, JavaScript)
- **백엔드**: 서버에서 실행되는 로직 (데이터 처리, 파일 관리)

### Next.js란?
**Next.js**는 React 기반의 웹 프레임워크입니다.

#### 장점
- 프론트엔드와 백엔드를 하나의 프로젝트에서 관리
- 자동 최적화 (빠른 로딩)
- SEO 친화적

#### 폴더 구조
```
src/app/                 # 웹 페이지들
├── page.tsx            # 메인 페이지 (홈)
├── results/            # 결과 페이지
├── settings/           # 설정 페이지
└── api/               # 백엔드 API
    ├── batch-search/   # 검색 기능
    ├── clips/         # 클립 관리
    └── settings/      # 설정 관리
```

### React 컴포넌트
React는 **컴포넌트**라는 작은 단위로 UI를 만듭니다.

```typescript
// 버튼 컴포넌트 예시
function SearchButton({ onClick, isLoading }) {
  return (
    <button 
      onClick={onClick}
      disabled={isLoading}
      className="bg-blue-500 text-white px-4 py-2 rounded"
    >
      {isLoading ? '검색 중...' : '검색하기'}
    </button>
  );
}
```

### TypeScript
JavaScript에 **타입 안전성**을 추가한 언어입니다.

```typescript
// JavaScript (타입 없음)
function search(query) {
  return fetch(`/api/search?q=${query}`);
}

// TypeScript (타입 있음)
function search(query: string): Promise<SearchResult[]> {
  return fetch(`/api/search?q=${query}`);
}
```

---

## 🗄️ 데이터베이스 기초

### 데이터베이스란?
**구조화된 데이터를 저장하고 관리하는 시스템**입니다.

### SQLite 특징
- **파일 기반**: 하나의 파일에 모든 데이터 저장
- **서버 불필요**: 별도 데이터베이스 서버 없이 사용
- **빠른 읽기**: 검색에 최적화

### 테이블 구조 (자막 데이터 예시)
```
subtitles 테이블
┌────────────┬─────────────────────┬────────────┬──────────┬──────────┐
│ id         │ media_file         │ text       │start_time│ end_time │
├────────────┼─────────────────────┼────────────┼──────────┼──────────┤
│ 1          │ friends_s01e01.mp4 │ How you?   │ 00:01:23 │ 00:01:25 │
│ 2          │ friends_s01e01.mp4 │ I'm fine   │ 00:01:26 │ 00:01:28 │
│ 3          │ office_s01e01.mp4  │ That's it  │ 00:02:10 │ 00:02:12 │
└────────────┴─────────────────────┴────────────┴──────────┴──────────┘
```

### FTS (Full-Text Search)
**전문 검색**: 텍스트 내용을 빠르게 검색하는 기능

```sql
-- 일반 검색 (느림)
SELECT * FROM subtitles WHERE text LIKE '%hello%';

-- FTS 검색 (빠름)
SELECT * FROM subtitles_fts WHERE text MATCH 'hello';
```

### 인덱스 (Index)
**검색 속도를 빠르게 하는 목록**

책의 목차와 같은 역할:
- 목차 없음: 전체 책을 다 읽어야 함 (느림)
- 목차 있음: 원하는 페이지로 바로 이동 (빠름)

---

## 🎬 영상 처리 기본

### FFmpeg란?
**비디오/오디오 파일을 편집하는 도구**입니다.

#### 주요 기능
- 비디오 자르기
- 포맷 변환
- 썸네일 생성
- 압축

### 비디오 클립 생성 과정
```
원본 비디오 (2시간) → FFmpeg → 클립 (30초)
```

#### 명령어 예시
```bash
# 1분 23초부터 30초간 클립 생성
ffmpeg -i friends_s01e01.mp4 -ss 00:01:23 -t 00:00:30 clip.mp4

# 썸네일 생성 (1분 24초 지점)
ffmpeg -i friends_s01e01.mp4 -ss 00:01:24 -frames:v 1 thumbnail.jpg
```

### 비디오 코덱
**비디오 데이터를 압축/압축해제하는 방식**

- **H.264 (libx264)**: 가장 널리 사용 (호환성 좋음)
- **H.265 (libx265)**: 더 좋은 압축률 (파일 크기 작음)
- **VP9**: Google에서 개발 (웹 최적화)

### 오디오 코덱
- **AAC**: 고품질, 웹 표준
- **MP3**: 널리 호환
- **OGG**: 오픈소스

---

## 🌐 네트워크 및 API

### API란?
**Application Programming Interface**
프로그램 간에 데이터를 주고받는 규칙입니다.

### REST API
웹에서 가장 많이 사용하는 API 방식

#### HTTP 메서드
- **GET**: 데이터 조회 (읽기)
- **POST**: 데이터 생성
- **PUT**: 데이터 전체 수정
- **PATCH**: 데이터 부분 수정
- **DELETE**: 데이터 삭제

#### 예시
```
GET /api/clips           # 클립 목록 조회
POST /api/clips          # 새 클립 생성
DELETE /api/clips/123    # 클립 삭제
```

### JSON 형식
**JavaScript Object Notation**
데이터를 주고받을 때 사용하는 형식

```json
{
  "success": true,
  "data": {
    "total": 5,
    "clips": [
      {
        "id": "clip001",
        "title": "Hello World",
        "duration": "00:00:30"
      }
    ]
  }
}
```

### 상태 코드
- **200**: 성공
- **400**: 잘못된 요청
- **401**: 인증 필요
- **403**: 권한 없음
- **404**: 찾을 수 없음
- **500**: 서버 오류

---

## 📁 파일 시스템

### 절대 경로 vs 상대 경로
```bash
# 절대 경로 (루트부터 전체 경로)
/home/kang/docker/youtube/indexer/indexer_v2/theme-search/public/clips/

# 상대 경로 (현재 위치에서)
./public/clips/
../config/user-settings.json
```

### 파일 권한
```bash
# 권한 확인
ls -la filename.txt
-rw-r--r-- 1 kang kang 1024 Jun 11 10:00 filename.txt

# 권한 구성
-rw-r--r--
├─ 첫 번째 - : 파일 타입 (- = 파일, d = 디렉토리)
├─ rw- : 소유자 권한 (읽기, 쓰기, 실행)
├─ r-- : 그룹 권한 (읽기만)
└─ r-- : 기타 권한 (읽기만)
```

### 환경 변수
**프로그램이 실행될 때 사용하는 설정값**

```bash
# 환경 변수 설정
export DATABASE_PATH="/path/to/database.db"

# .env.local 파일에서 관리
DATABASE_PATH=/path/to/database.db
ADMIN_KEY=secret-key-2024
```

---

## 📖 용어 사전

### 개발 관련
| 용어 | 설명 | 예시 |
|------|------|------|
| **컴포넌트** | 재사용 가능한 UI 단위 | 버튼, 입력창, 카드 |
| **라우팅** | URL에 따라 페이지 전환 | `/search` → 검색 페이지 |
| **상태 관리** | 앱의 데이터 상태 추적 | 로딩 중, 에러 발생 |
| **훅(Hook)** | React 기능을 사용하는 방법 | `useState`, `useEffect` |
| **props** | 컴포넌트에 전달하는 데이터 | `<Button text="클릭" />` |

### 서버 관련
| 용어 | 설명 | 예시 |
|------|------|------|
| **포트** | 프로그램이 네트워크를 사용하는 번호 | 3000, 3010, 80 |
| **프로세스** | 실행 중인 프로그램 | Next.js 서버, FFmpeg |
| **로그** | 프로그램의 실행 기록 | 에러 메시지, 접속 기록 |
| **캐시** | 자주 사용하는 데이터를 임시 저장 | 검색 결과 저장 |
| **백업** | 데이터를 안전한 곳에 복사 | 데이터베이스 복사본 |

### 데이터베이스 관련
| 용어 | 설명 | 예시 |
|------|------|------|
| **테이블** | 데이터를 저장하는 표 | 자막 테이블, 사용자 테이블 |
| **행(Row)** | 테이블의 한 줄 데이터 | 하나의 자막 데이터 |
| **열(Column)** | 테이블의 한 항목 | ID, 제목, 시간 |
| **쿼리** | 데이터를 요청하는 명령 | `SELECT * FROM subtitles` |
| **인덱스** | 검색 성능을 높이는 구조 | 제목으로 빠른 검색 |

### 미디어 관련
| 용어 | 설명 | 예시 |
|------|------|------|
| **코덱** | 비디오/오디오 압축 방식 | H.264, AAC |
| **비트레이트** | 초당 데이터 양 | 1000kbps |
| **해상도** | 화면 크기 | 1920x1080, 320x180 |
| **프레임률** | 초당 이미지 수 | 30fps, 60fps |
| **타임스탬프** | 시간 정보 | 00:01:23,456 |

---

## ❓ 자주 묻는 질문

### Q1: "undefined개 클립"이 왜 나타나나요?
**A**: 백엔드에서 숫자 대신 `undefined`가 전달되었습니다.

**원인**:
- API 응답 구조 불일치
- 변수명 오타
- 데이터 타입 문제

**해결**:
1. 브라우저 F12 → Network 탭에서 API 응답 확인
2. 서버 터미널에서 로그 확인
3. 필요시 서버 재시작

### Q2: 클립이 생성되지 않아요
**A**: 여러 원인이 있을 수 있습니다.

**체크리스트**:
- [ ] FFmpeg 설치되어 있는지 확인
- [ ] 원본 비디오 파일 경로가 올바른지 확인
- [ ] 클립 저장 폴더 권한 확인
- [ ] 디스크 공간 충분한지 확인

### Q3: 검색 결과가 없어요
**A**: 데이터베이스나 검색어 문제일 수 있습니다.

**확인사항**:
- [ ] 데이터베이스 파일 존재 확인
- [ ] 영어 문장으로 검색했는지 확인
- [ ] 너무 복잡한 문장은 단순하게 수정

### Q4: 서버가 느려요
**A**: 성능 문제입니다.

**최적화 방법**:
- [ ] 오래된 클립 파일 삭제
- [ ] 서버 재시작
- [ ] 메모리/CPU 사용량 확인
- [ ] 동시 사용자 수 확인

### Q5: 설정이 저장되지 않아요
**A**: 설정 잠금이나 권한 문제입니다.

**해결 단계**:
1. 설정 페이지에서 잠금 상태 확인
2. 관리자 키로 잠금 해제
3. 파일 권한 확인 (`chmod 644 config/user-settings.json`)

### Q6: 브라우저에서 접속이 안 돼요
**A**: 네트워크나 서버 문제입니다.

**확인사항**:
- [ ] 서버가 실행 중인지 확인 (`ps aux | grep next`)
- [ ] 올바른 포트 사용하는지 확인 (보통 3010)
- [ ] 방화벽 설정 확인
- [ ] 브라우저 캐시 삭제

---

## 🛠️ 기본 문제 해결 순서

### 1단계: 상황 파악
```bash
# 서버 상태 확인
ps aux | grep next

# 포트 사용 확인
netstat -tulpn | grep 3010

# 로그 확인
tail -f /var/log/theme-search.log
```

### 2단계: 기본 해결책
```bash
# 서버 재시작
pkill -f "next"
cd /home/kang/docker/youtube/indexer/indexer_v2/theme-search
npm run dev

# 브라우저 캐시 삭제
Ctrl + Shift + R (강력 새로고침)

# 권한 재설정
chmod 755 public/clips
chmod 644 config/user-settings.json
```

### 3단계: 심화 진단
```bash
# 디스크 공간 확인
df -h

# 메모리 사용량 확인
free -h

# 에러 로그 검색
grep -i error /var/log/*theme-search*
```

---

## 📚 추가 학습 자료

### 웹 개발 기초
- **HTML/CSS**: 웹 페이지 구조와 디자인
- **JavaScript**: 웹 페이지 동작 프로그래밍
- **React**: 사용자 인터페이스 라이브러리
- **Node.js**: 서버 사이드 JavaScript

### 데이터베이스
- **SQL 기초**: 데이터 조회, 수정, 삭제
- **SQLite**: 파일 기반 데이터베이스
- **인덱싱**: 검색 성능 최적화

### 시스템 관리
- **리눅스 명령어**: 파일 관리, 프로세스 관리
- **네트워크**: HTTP, TCP/IP 기초
- **보안**: 파일 권한, 접근 제어

---

## 🎯 핵심 원칙

### 1. 안전 제일
- 중요한 파일은 항상 백업
- 테스트 환경에서 먼저 확인
- 변경 사항은 작은 단위로 진행

### 2. 문서화
- 변경 사항은 항상 기록
- 문제 해결 과정을 문서화
- 정기적으로 문서 업데이트

### 3. 모니터링
- 정기적으로 시스템 상태 확인
- 로그 파일 주기적으로 검토
- 성능 지표 추적

### 4. 학습
- 모르는 용어는 즉시 찾아보기
- 에러 메시지 자세히 읽기
- 동료와 지식 공유

---

> **📝 이 기본 지식 가이드는 Theme Search 프로젝트를 이해하고 유지보수하는 데 필요한 최소한의 지식을 담고 있습니다. 실무에서 막히는 부분이 있으면 이 문서를 참조하세요!**
